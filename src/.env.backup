# ============================================================================
# FASTAPI BOILERPLATE - ENVIRONMENT CONFIGURATION
# ================================# 8. Rate limiting hoat dong theo tier cua user
# 9. Redis co the dung chung cho tat ca services trong development
# 10. Production nen tach rieng Redis instances cho tung service
# 11. Admin panel mac dinh o /admin - thay doi CRUD_ADMIN_MOUNT_PATH neu can

# ============================================================================
# SECURITY CHECKLIST
# ============================================================================
# - Da thay doi SECRET_KEY
# - Da thay doi ADMIN_PASSWORD  
# - Da thay doi database passwords
# - Da cau hinh CORS neu can
# - Da cau hinh IP restrictions cho admin
# - Da enable secure cookies cho production
# - Da review rate limit settings
# - Da cau hinh backup cho database============================
# Cau hinh moi truong cho FastAPI boilerplate
# Doc ky huong dan truoc khi thay doi cac gia tri

# ------------- APP SETTINGS -------------
APP_NAME="FastAPI Boilerplate"
APP_DESCRIPTION="A fully Async FastAPI boilerplate using SQLAlchemy and Pydantic 2"
APP_VERSION="0.1.0"
CONTACT_NAME="Your Name"
CONTACT_EMAIL="your.email@example.com"
LICENSE_NAME="MIT"

# ------------- DATABASE SETTINGS -------------
# PostgreSQL Configuration (Primary Database)
POSTGRES_USER="postgres"
POSTGRES_PASSWORD="postgres123"
POSTGRES_SERVER="localhost"  # Use "db" if running with docker-compose
POSTGRES_PORT=5432
POSTGRES_DB="fastapi_boilerplate"

# Database URL (will be constructed automatically)
# POSTGRES_URL=""  # Optional: full database URL override

# MySQL Configuration (Alternative - not used by default)
MYSQL_USER="mysql_user"
MYSQL_PASSWORD="mysql_password"
MYSQL_SERVER="localhost"
MYSQL_PORT=3306
MYSQL_DB="fastapi_boilerplate"
# MYSQL_URL=""  # Optional: full MySQL URL override

# SQLite Configuration (Development only)
SQLITE_URI="./fastapi_boilerplate.db"
SQLITE_SYNC_PREFIX="sqlite:///"
SQLITE_ASYNC_PREFIX="sqlite+aiosqlite:///"

# ------------- PGADMIN SETTINGS -------------
# PgAdmin Configuration for Database Management
PGADMIN_DEFAULT_EMAIL="admin@example.com"
PGADMIN_DEFAULT_PASSWORD="admin123"
PGADMIN_LISTEN_PORT=80

# ------------- SECURITY SETTINGS -------------
# JWT Configuration
# Generate SECRET_KEY using: openssl rand -hex 32
SECRET_KEY="your-super-secret-key-here-replace-with-openssl-rand-hex-32"
ALGORITHM="HS256"
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# ------------- ADMIN USER SETTINGS -------------
# First Superuser Configuration
ADMIN_NAME="Admin User"
ADMIN_EMAIL="admin@example.com"
ADMIN_USERNAME="admin"
ADMIN_PASSWORD="!Ch4ng3Th1sP4ssW0rd!"

# ------------- CRUD ADMIN PANEL SETTINGS -------------
# Admin Panel Configuration
CRUD_ADMIN_ENABLED=true
CRUD_ADMIN_MOUNT_PATH="/admin"

# Admin Security Settings
CRUD_ADMIN_ALLOWED_IPS_LIST=""  # Comma-separated IPs, empty = allow all
CRUD_ADMIN_ALLOWED_NETWORKS_LIST=""  # Comma-separated networks
CRUD_ADMIN_MAX_SESSIONS=10
CRUD_ADMIN_SESSION_TIMEOUT=1440  # 24 hours in minutes
SESSION_SECURE_COOKIES=true

# Admin Tracking Settings
CRUD_ADMIN_TRACK_EVENTS=true
CRUD_ADMIN_TRACK_SESSIONS=true

# Admin Redis Configuration (Optional - for production)
CRUD_ADMIN_REDIS_ENABLED=false
CRUD_ADMIN_REDIS_HOST="localhost"  # Use "redis" if running with docker-compose
CRUD_ADMIN_REDIS_PORT=6379
CRUD_ADMIN_REDIS_DB=0
CRUD_ADMIN_REDIS_PASSWORD=""
CRUD_ADMIN_REDIS_SSL=false

# ------------- REDIS CACHE SETTINGS -------------
# Redis Cache Configuration
REDIS_CACHE_HOST="localhost"  # Use "redis-cache" if running with docker-compose
REDIS_CACHE_PORT=6379

# ------------- CLIENT-SIDE CACHE SETTINGS -------------
# HTTP Cache-Control Headers
CLIENT_CACHE_MAX_AGE=60  # seconds

# ------------- REDIS QUEUE SETTINGS -------------
# ARQ Background Tasks Configuration
REDIS_QUEUE_HOST="localhost"  # Use "redis-queue" if running with docker-compose
REDIS_QUEUE_PORT=6380

# ------------- REDIS RATE LIMITER SETTINGS -------------
# Distributed Rate Limiting Configuration
REDIS_RATE_LIMIT_HOST="localhost"  # Use "redis-ratelimit" if running with docker-compose
REDIS_RATE_LIMIT_PORT=6381

# ------------- DEFAULT RATE LIMIT SETTINGS -------------
# Fallback Rate Limit Values
DEFAULT_RATE_LIMIT_LIMIT=10      # requests per period
DEFAULT_RATE_LIMIT_PERIOD=3600   # period in seconds (1 hour)

# ------------- TIER SETTINGS -------------
# Default Tier Configuration
TIER_NAME="free"

# ------------- ENVIRONMENT SETTINGS -------------
# Application Environment: local, staging, production
ENVIRONMENT="local"

# ============================================================================
# DOCKER COMPOSE OVERRIDES
# ============================================================================
# When using Docker Compose, uncomment and modify these settings:

# ------------- DATABASE (Docker) -------------
# POSTGRES_SERVER="db"
# POSTGRES_PORT=5432

# ------------- REDIS SERVICES (Docker) -------------
# REDIS_CACHE_HOST="redis"
# REDIS_QUEUE_HOST="redis"  
# REDIS_RATE_LIMIT_HOST="redis"
# CRUD_ADMIN_REDIS_HOST="redis"

# ============================================================================
# PRODUCTION OVERRIDES
# ============================================================================
# For production deployment, modify these settings:

# ------------- PRODUCTION SECURITY -------------
# SECRET_KEY="your-production-secret-key-here"
# ENVIRONMENT="production"
# SESSION_SECURE_COOKIES=true

# ------------- PRODUCTION DATABASE -------------
# POSTGRES_SERVER="your-production-db-host"
# POSTGRES_USER="your-production-db-user"
# POSTGRES_PASSWORD="your-production-db-password"
# POSTGRES_DB="your-production-db-name"

# ------------- PRODUCTION REDIS -------------
# REDIS_CACHE_HOST="your-production-redis-host"
# REDIS_QUEUE_HOST="your-production-redis-host"
# REDIS_RATE_LIMIT_HOST="your-production-redis-host"

# ------------- PRODUCTION ADMIN -------------
# ADMIN_PASSWORD="your-super-secure-admin-password"
# CRUD_ADMIN_REDIS_ENABLED=true
# CRUD_ADMIN_ALLOWED_IPS_LIST="192.168.1.0/24,10.0.0.0/8"

# ============================================================================
# DEVELOPMENT NOTES
# ============================================================================
# 1. Thay đổi SECRET_KEY bằng lệnh: openssl rand -hex 32
# 2. Đổi tất cả passwords mặc định trước khi deploy
# 3. Với Docker Compose, sử dụng service names thay vì localhost
# 4. Environment "local" sẽ expose API docs publicly
# 5. Environment "staging" chỉ cho superuser access docs  
# 6. Environment "production" sẽ ẩn hoàn toàn API docs
# 7. Rate limiting hoạt động theo tier của user
# 8. Redis có thể dùng chung cho tất cả services trong development
# 9. Production nên tách riêng Redis instances cho từng service
# 10. Admin panel mặc định ở /admin - thay đổi CRUD_ADMIN_MOUNT_PATH nếu cần

# ============================================================================
# SECURITY CHECKLIST
# ============================================================================
# ✅ Đã thay đổi SECRET_KEY
# ✅ Đã thay đổi ADMIN_PASSWORD  
# ✅ Đã thay đổi database passwords
# ✅ Đã cấu hình CORS nếu cần
# ✅ Đã cấu hình IP restrictions cho admin
# ✅ Đã enable secure cookies cho production
# ✅ Đã review rate limit settings
# ✅ Đã cấu hình backup cho database